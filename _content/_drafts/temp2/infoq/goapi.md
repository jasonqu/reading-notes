http://www.infoq.com/cn/presentations/go-api-programming

API-Centric的好处
服务多个终端，特别是现在移动互联网的快速发展
标准化，无论是对外还是对内都能实现统一标准(http+json/xml)
适合团队之间的协作
代码清晰，结构化，可维护性强
安全性，可以利用认证系统做到API的安全
去中心化，易扩展，API的无状态化，可以很方便的进行扩展
实现模块化，实现最小化的API之后，可以通过组合又可以拼装新的API
可以快速将内部的API进行开放，让应用迅速的得到开发者的支持

Go适合API编程
静态编译跨平台，很多问题扼杀在编译阶段
内置net/http，处理网络应用得心应手
内置JSON、XML处理，方便处理表现层
语言级别的并发支持，编写并发简单方便
丰富的内置包，借鉴了很多Python的思想
足够简单就会让我们的程序足够稳定
相比PHP、python、Ruby具有性能优势

API开发关注点：
并发处理——go并发
http处理——http内置包
数据操作——io/os/strings/strconv/sql包
XML/JSON处理——json/xml包
日志处理——log包
用户认证——oauth/oauth2/basic/Digest authentication
数据加密—— aes/dec/md5/hash/sha1等包

beego是什么
beego是一个基于Go语言开发的应用框架，主要思路来源于tornado和sintra，主要有如
下这些特性：
REST设计
加强型路由
MVC模式
智能日志模块
ini配置模块
XML、JSON输出
常用模板函数
缓存系统
github.com/astaxie/beego

基于beego的实际项目(I)
1、短域名服务
使用beego开发了一个类似bitly的短域名服务，提供盛大内部项目使用，目前一台机器：
32G内存、8核、centos64，redis数据库，数据量在1000w多点，运行半年多时间了，至
今没有出现过一次down机或者奔溃
2、政府合作项目
使用beego提供系统级别服务，监控集成电路板信号，智能分析nginx配置，提供大数据
量的下载和页面访问
3、内部监控系统
目前这个项目还在开发中，主要是利用beego做两个服务，一个是服务器端，收集信息，
一个是客户端，收集信息并上报给服务器端，如果和服务端断开，那么本地可以暂存数
据，防止数据丢失，同事还支持类似pupput的功能，支持程序分发
4、日志分析系统
以前采用hadoop来分析日志的来源和省份信息，发现hadoop分析这么大的数据，性能不
是很好，延迟比较大，目前采用自己的一套架构，squid日志每小时分割上报，每小时对
日志进行分割，然后进行UV、PV、省份、运营商、浏览器、数据量等的分析，同时把日
志进行按域名分割，提供用户原始日志下载
5、下载分发系统
架构暂时不好公布，我们提供文件下载的智能分发，但是从文件上传到下发到每一台服务
器，以前采用BT的方式，性能不是很好，目前采用新的架构，性能提升十几倍
6、基于微信的提醒助手
Go中国微信账号的微信账号源码，目前已经开源在github：github.com/astaxie/weixin
7、视频直播调度器
这是一个和盛大游戏合作的项目，做的是游戏中类似YY的一个视频直播间的项目

项目中的经验和教训
主要经验是：
要能hold的住整个运行机制，很多时候需要知道底层的运行机制(文件描述符事件)
敢于在项目中使用，不用你永远不知道Go到底有多好(稳定性)
不要听别人说，要自己去测试，至于好不好，数据说了算
Go的模板现在不是很好用，还没办法和PHP、python、ruby下的那些模板引擎比

教训
Go的import包不支持版本，有时候升级容易导致项目不可运行，所以需要自己控制相
应的版本信息
Go的goroutine无法控制数量，导致很多时候其实是在不同的goroutine之间切换，容
易失控
goroutine调试最好的方式还是log+print，gdb不是很好用
GC延迟有点大，日志系统上过一次当
pkg下面的图片处理库很多bug，还是使用成熟产品好，调用这些成熟库imagemagick
的接口比较靠谱




